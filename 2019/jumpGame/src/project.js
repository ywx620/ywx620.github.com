__require=function t(i,e,n){function o(a,c){if(!e[a]){if(!i[a]){var r=a.split("/");if(r=r[r.length-1],!i[r]){var l="function"==typeof __require&&__require;if(!c&&l)return l(r,!0);if(s)return s(r,!0);throw new Error("Cannot find module '"+a+"'")}}var h=e[a]={exports:{}};i[a][0].call(h.exports,function(t){return o(i[a][1][t]||t)},h,h.exports,t,i,e,n)}return e[a].exports}for(var s="function"==typeof __require&&__require,a=0;a<n.length;a++)o(n[a]);return o}({GameMain:[function(t,i,e){"use strict";cc._RF.push(i,"b8ba0Sr5hREqY/jIBNIKQWY","GameMain"),cc.Class({extends:cc.Component,properties:{},onStartGame:function(){cc.director.loadScene("GamePlay")},onLoad:function(){},start:function(){}}),cc._RF.pop()},{}],GameOver:[function(t,i,e){"use strict";cc._RF.push(i,"4c821DBU1pIEYMJdWQAa0et","GameOver"),cc.Class({extends:cc.Component,properties:{scoreDisplay:cc.Label},updateScore:function(t){this.scoreDisplay.string="score:"+t},onStartGame:function(){cc.director.loadScene("GamePlay")}}),cc._RF.pop()},{}],GamePlay:[function(t,i,e){"use strict";cc._RF.push(i,"126e4VoHdJA6owdZ5jrBHwb","GamePlay"),cc.Class({extends:cc.Component,properties:{role:cc.Node,power:cc.ProgressBar,gameBg:cc.Node,bgContainer:cc.Node,cloudContainer:cc.Node,cloudFirst:cc.Node,speedPower:.01,speedY:100,scoreDisplay:cc.Label,gameOver:cc.Prefab,music:cc.Node},roleClass:n,onLoad:function(){this.score=0,this.updateScore(),this.initMusic(),this.initData(),this.roleClass=new n(this.role),this.openEvent();var t=this;cc.loader.loadRes("jumpImage",cc.SpriteAtlas,function(i,e){i?cc.error(i.message||i):t.initCloud()}),this.initBg()},initMusic:function(){this.audio=this.music.getComponent("Music")},initBg:function(){for(var t=0;t<3;t++){var i=cc.instantiate(this.gameBg);i.x=i.width*t,this.bgContainer.addChild(i)}},initCloud:function(){var t=new o;t.y=this.cloudFirst.y,t.x=100+(.5-Math.random())*(this.node.width-200),this.cloudContainer.addChild(t),t.init(1+Math.ceil(4*Math.random()))},openEvent:function(){this.node.on(cc.Node.EventType.TOUCH_START,this.readly,this),this.node.on(cc.Node.EventType.TOUCH_END,this.jump,this)},closeEvent:function(){this.node.off(cc.Node.EventType.TOUCH_START,this.readly,this),this.node.off(cc.Node.EventType.TOUCH_END,this.jump,this)},initData:function(){this.isReady=!1,this.isPlay=!1,this.sign=1,this.speedX=12,this.speedPowerNum=0,this.power.progress=0},readly:function(){this.initData(),this.isReady=!0,this.roleClass.readly(),this.audio.playReady()},jump:function(){this.speedX*=this.power.progress,this.sign=1,this.isReady=!1,this.isPlay=!0,this.roleClass.jumpUp(),this.closeEvent(),this.audio.playJumpStart()},over:function(){this.isPlay=!1;var t=cc.instantiate(this.gameOver);t.getComponent("GameOver").updateScore(this.score),this.node.addChild(t),this.audio.playGameOver(),this.audio.playFly()},update:function(t){if(this.isReady&&(this.power.progress=this.speedPowerNum++*this.speedPower),this.isPlay){var i=this.roleClass.getx(),e=this.roleClass.gety();this.roleClass.setx(i+this.speedX),this.roleClass.sety(e+(this.speedY-e)/10*this.sign),Math.abs(this.speedY-e)<10&&(this.sign=-1,this.roleClass.jumpDown());var n=this.node.height/2;e<0-this.role.height-n&&this.over(),this.updateScore(),this.checkHitCloud()}},updateScore:function(){this.scoreDisplay.string="score:"+this.score,this.score++},checkHitCloud:function(){for(var t=0;t<this.cloudContainer.childrenCount;t++){var i=this.cloudContainer.children[t];if("cloud"==i.name){var e=i.getPosition(),n=this.role.getPosition();e.sub(n).mag()<i.width>>1&&(i.name="nono",this.readlyNext(i))}}},readlyNext:function(t){this.isPlay=!1,this.roleClass.idle(),this.roleClass.sety(t.y),this.startMove(),this.audio.playJumpOver()},startMove:function(){for(var t=[this.role,this.cloudFirst],i=0;i<this.cloudContainer.childrenCount;i++){var e=this.cloudContainer.children[i];t.push(e)}for(i=0;i<this.bgContainer.childrenCount;i++){e=this.bgContainer.children[i];t.push(e)}var n=-this.node.width/2-this.role.x+50,o=0;for(i=0;i<t.length;i++){e=t[i];var s=cc.moveBy(2,cc.v2(n)),a=cc.callFunc(function(){++o==t.length&&this.addNewCloud(t)},this),c=cc.sequence(s,a);e.runAction(c)}},addNewCloud:function(t){for(var i=0;i<t.length;i++){var e=t[i];if(e.x<-this.node.width)if("nono"==e.name)e.destroy();else if(e==this.cloudFirst)e.removeFromParent();else{var n=this.bgContainer.childrenCount;e.x=e.width*n+e.x}}this.openEvent(),this.initCloud()}});var n=cc.Class({role:cc.Node,animation:cc.Animation,ctor:function(t){this.role=t,this.animation=this.role.getComponent(cc.Animation),this.idle()},idle:function(){this.animation.play("idle")},readly:function(){this.animation.play("readly")},jumpUp:function(){this.animation.play("jumpUp")},jumpDown:function(){this.animation.play("jumpDown")},setx:function(t){this.role.x=t},getx:function(){return this.role.x},sety:function(t){this.role.y=t},gety:function(){return this.role.y}}),o=cc.Class({extends:cc.Node,init:function(t){this.name="cloud";var i=new cc.Node;i.addComponent(cc.Sprite);var e=i.getComponent(cc.Sprite),n=cc.loader.getRes("jumpImage",cc.SpriteAtlas);e.spriteFrame=n.getSpriteFrame("item_"+t),this.addChild(i),this.width=i.width}});cc._RF.pop()},{}],Music:[function(t,i,e){"use strict";cc._RF.push(i,"08926p2TtBFf40kMD9SwRzN","Music"),cc.Class({extends:cc.Component,properties:{ready:{type:cc.AudioClip,default:null},fly:{type:cc.AudioClip,default:null},jumpStart:{type:cc.AudioClip,default:null},jumpOver:{type:cc.AudioClip,default:null},gameStart:{type:cc.AudioClip,default:null},gameOver:{type:cc.AudioClip,default:null}},playSound:function(t){cc.audioEngine.play(t,!1,1)},playReady:function(){this.playSound(this.ready)},playFly:function(){this.playSound(this.fly)},playJumpStart:function(){this.playSound(this.jumpStart)},playJumpOver:function(){this.playSound(this.jumpOver)},playGameStart:function(){this.playSound(this.gameStart)},playGameOver:function(){this.playSound(this.gameOver)}}),cc._RF.pop()},{}]},{},["GameMain","GameOver","GamePlay","Music"]);